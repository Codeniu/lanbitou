# 1.ç”Ÿæˆå”¯ä¸€æ ‡è¯†

```js
generateUUID() {
  var d = new Date().getTime();
  var uuid = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(
    /[xy]/g,
    function(c) {
      var r = (d + Math.random() * 16) % 16 | 0;
      d = Math.floor(d / 16);
      return (c == "x" ? r : (r & 0x3) | 0x8).toString(16);
    }
  );
  return uuid;
},
```



# 2. Nginx çš„ä¸€ä¸ªå°æŠ€å·§

**åœ¨ä¸ä½¿ç”¨ç¼–ç¨‹è¯­è¨€çš„æƒ…å†µä¸‹ï¼Œåœ¨ JSON å¯¹è±¡é‡Œè¿”å›å®¢æˆ·ç«¯çš„ IP åœ°å€ã€‚**

The following block does the trick:

```
location /ip {
    default_type text/plain;
    return 200 $remote_addr;
}
```

The response is simply the IP address of the client:

```
$ curl https://example.com/ip
2001:1b48:103::189
```

**Bonus: JSON response**

Want a JSON response? Sure, it is perfectly doable:

```nginx
location /json_ip {
    default_type application/json;
    return 200 "{\"ip\":\"$remote_addr\"}";
}
```

The response is now a pretty JSON document:

```nginx
$ curl -s https://example.com/json_ip | jq
{
    "ip": "2001:1b48:103::189"
}
```



#  3.åˆ¤æ–­æ˜¯å¦åŒ…å«å­—ç¬¦ä¸²æŸå­—ç¬¦ä¸²

```js
/**
* åˆ¤æ–­æ˜¯å¦åŒ…å«å­—ç¬¦ä¸²æŸå­—ç¬¦ä¸²
* @param {[type]} str [è¢«æ£€æµ‹çš„å­—ç¬¦ä¸²]
* @param {[type]} substr [æ£€æµ‹æ˜¯å¦å«æœ‰çš„å­—ç¬¦ä¸²]
* @return {Boolean} [ture,false]
*/
function isContains(str,substr) {
ã€€ã€€return new RegExp(substr).test(str);
}
```





#  4.åˆ é™¤arr1ä¸­çš„arr2çš„å…ƒç´ é¡¹

```js
    /**
     * @description åˆ é™¤arr1ä¸­çš„arr2çš„å…ƒç´ é¡¹
     * @returns è¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„arr1
     */
    formateArray(arr1, arr2) {
      // arr2åœ¨arr1ä¸­å„ä¸ªå…ƒç´ çš„ç´¢å¼•,ä¿å­˜åˆ°indexsä¸­
      let indexs = [];
      arr2.forEach((item, index) => {
        indexs.push(arr1.indexOf(item));
      });
      //å¯¹indexListæ’åº
      indexs.sort(function(a, b) {
        return b - a;
      });
      //åˆ é™¤
      indexs.forEach(function(index) {
        arr1.splice(index, 1);
      });

      return arr1;
    },
```



# 5.æ‰‹å†™Function.prototype.bind()å‡½æ•°

> MDN:`bind()` æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œåœ¨ `bind()` è¢«è°ƒç”¨æ—¶ï¼Œè¿™ä¸ªæ–°å‡½æ•°çš„ `this` è¢«æŒ‡å®šä¸º `bind()` çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè€Œå…¶ä½™å‚æ•°å°†ä½œä¸ºæ–°å‡½æ•°çš„å‚æ•°ï¼Œä¾›è°ƒç”¨æ—¶ä½¿ç”¨ã€‚
>
> https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/bind

ğŸš€ ç»™æ—¢æœ‰å‡½æ•°ç»‘å®šæ–°çš„å‚æ•°å€¼

```js
Function.prototype.bind = function(context, ...args) {
    // contextä¸ºè¦æ”¹å˜çš„æ‰§è¡Œä¸Šä¸‹æ–‡
    // ...argsä¸ºä¼ å…¥bindå‡½æ•°çš„å…¶ä½™å‚æ•°
    return (...newArgs) => {
        // è¿™é‡Œè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°
        // é€šè¿‡è°ƒç”¨callæ–¹æ³•æ”¹å˜thisæŒ‡å‘å¹¶ä¸”æŠŠè€å‚å’Œæ–°å‚ä¸€å¹¶ä¼ å…¥
        return this.call(context, ...args, ...newArgs);
    }
};
// æµ‹è¯•ç”¨ä¾‹
let o = {name: 'chd'};
function f(...args) {
    console.log(this.name, ...args);
}
let o2 = f.bind(o, 1, '222', null, [1,2,3], {age: 5});
o2();

// chd 1 222 null (3)Â [1, 2, 3] {age: 5}
```





# 6.ç†è§£callã€ bindã€ apply

åœ¨JavaScriptä¸­ï¼Œ`call`ã€`apply`å’Œ`bind`æ˜¯`Function`å¯¹è±¡è‡ªå¸¦çš„ä¸‰ä¸ªæ–¹æ³•ï¼Œè¿™ä¸‰ä¸ªæ–¹æ³•çš„ä¸»è¦ä½œç”¨æ˜¯æ”¹å˜å‡½æ•°ä¸­çš„`this`æŒ‡å‘ã€‚



`call`ã€`apply`ã€`bind`æ–¹æ³•çš„å…±åŒç‚¹å’ŒåŒºåˆ«ï¼š
`apply` ã€ `call` ã€`bind` ä¸‰è€…éƒ½æ˜¯ç”¨æ¥æ”¹å˜å‡½æ•°çš„thiså¯¹è±¡çš„æŒ‡å‘çš„ï¼›
`apply` ã€ `call` ã€`bind` ä¸‰è€…ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯thisè¦æŒ‡å‘çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æƒ³æŒ‡å®šçš„ä¸Šä¸‹æ–‡ï¼ˆå‡½æ•°çš„æ¯æ¬¡è°ƒç”¨éƒ½ä¼šæ‹¥æœ‰ä¸€ä¸ªç‰¹æ®Šå€¼â€”â€”æœ¬æ¬¡è°ƒç”¨çš„ä¸Šä¸‹æ–‡ï¼ˆcontextï¼‰â€”â€”è¿™å°±æ˜¯`this`å…³é”®å­—çš„å€¼ã€‚ï¼‰ï¼›
`apply` ã€ `call` ã€`bind` ä¸‰è€…éƒ½å¯ä»¥åˆ©ç”¨åç»­å‚æ•°ä¼ å‚ï¼›

`bind` æ˜¯è¿”å›å¯¹åº”å‡½æ•°ï¼Œä¾¿äºç¨åè°ƒç”¨ï¼›`apply` ã€`call` åˆ™æ˜¯ç«‹å³è°ƒç”¨ ã€‚



## ç†è§£Fuction.prototype.call()

**è¯­æ³•ï¼š**

```
call([thisObj[,arg1[, arg2[, [,.argN]]]]])
```

**å®šä¹‰ï¼š**è°ƒç”¨ä¸€ä¸ªå¯¹è±¡çš„ä¸€ä¸ªæ–¹æ³•ï¼Œä»¥å¦ä¸€ä¸ªå¯¹è±¡æ›¿æ¢å½“å‰å¯¹è±¡ã€‚

**è¯´æ˜ï¼š** `call` æ–¹æ³•å¯ä»¥ç”¨æ¥ä»£æ›¿å¦ä¸€ä¸ªå¯¹è±¡è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ã€‚
`call` æ–¹æ³•å¯å°†ä¸€ä¸ªå‡½æ•°çš„å¯¹è±¡ä¸Šä¸‹æ–‡ä»åˆå§‹çš„ä¸Šä¸‹æ–‡æ”¹å˜ä¸ºç”± thisObj æŒ‡å®šçš„æ–°å¯¹è±¡ã€‚

`thisObj`çš„å–å€¼æœ‰ä»¥ä¸‹4ç§æƒ…å†µï¼š
ï¼ˆ1ï¼‰ ä¸ä¼ ï¼Œæˆ–è€…ä¼ null,undefinedï¼Œ å‡½æ•°ä¸­çš„thisæŒ‡å‘windowå¯¹è±¡
ï¼ˆ2ï¼‰ ä¼ é€’å¦ä¸€ä¸ªå‡½æ•°çš„å‡½æ•°åï¼Œå‡½æ•°ä¸­çš„thisæŒ‡å‘è¿™ä¸ªå‡½æ•°çš„å¼•ç”¨
ï¼ˆ3ï¼‰ ä¼ é€’å­—ç¬¦ä¸²ã€æ•°å€¼æˆ–å¸ƒå°”ç±»å‹ç­‰åŸºç¡€ç±»å‹ï¼Œå‡½æ•°ä¸­çš„thisæŒ‡å‘å…¶å¯¹åº”çš„åŒ…è£…å¯¹è±¡ï¼Œå¦‚ Stringã€Numberã€Boolean
ï¼ˆ4ï¼‰ ä¼ é€’ä¸€ä¸ªå¯¹è±¡ï¼Œå‡½æ•°ä¸­çš„thisæŒ‡å‘è¿™ä¸ªå¯¹è±¡



ä¾‹å­1

```js
function class1(){   
  this.name=function(){   
    console.log("æˆ‘æ˜¯class1å†…çš„æ–¹æ³•");   
  }   
}   
function class2(){ 
  class1.call(this);  //æ­¤è¡Œä»£ç æ‰§è¡Œåï¼Œå½“å‰çš„thisæŒ‡å‘äº†class1ï¼ˆä¹Ÿå¯ä»¥è¯´class2ç»§æ‰¿äº†class1ï¼‰ 
  console.log(this.name)
}  
class2()
```



ä¾‹å­2

```js
function Animal(){   
  this.name="animal";   
  this.showName=function(){   
    console.log(this.name);   
  }   
}   
function Dog(){   
  this.name="dog";   
}   
var animal=new Animal();   
var dog=new Dog();       

animal.showName.call(dog);

// dog
```

ç»§æ‰¿ï¼š

```js
function Animal(name){   
  this.name=name;   
  this.showName=function(){   
    console.log(this.name);   
  }   
}   
function Dog(name){   
  Animal.call(this,name);   
}   
var dog=new Dog("Crazy dog");   
dog.showName();

è¾“å‡ºï¼šCrazy dog
```

Animal.call(this) çš„æ„æ€å°±æ˜¯ä½¿ç”¨ Animalå¯¹è±¡ä»£æ›¿thiså¯¹è±¡ï¼Œé‚£ä¹ˆDogå°±èƒ½ç›´æ¥è°ƒç”¨Animalçš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚



## ç†è§£Function.prototype.apply()

è¯­æ³•ï¼š`apply([thisObj[,argArray]])`

å®šä¹‰ï¼šåº”ç”¨æŸä¸€å¯¹è±¡çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨å¦ä¸€ä¸ªå¯¹è±¡æ›¿æ¢å½“å‰å¯¹è±¡ã€‚

è¯´æ˜ï¼š
å¦‚æœ argArray ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„æ•°ç»„æˆ–è€…ä¸æ˜¯ arguments å¯¹è±¡ï¼Œé‚£ä¹ˆå°†å¯¼è‡´ä¸€ä¸ª TypeErrorã€‚
å¦‚æœæ²¡æœ‰æä¾› argArray å’Œ thisObj ä»»ä½•ä¸€ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆ Global å¯¹è±¡å°†è¢«ç”¨ä½œ thisObjï¼Œ å¹¶ä¸”æ— æ³•è¢«ä¼ é€’ä»»ä½•å‚æ•°ã€‚

call å’Œ applyçš„åŒºåˆ«
å¯¹äº applyã€call äºŒè€…è€Œè¨€ï¼Œä½œç”¨å®Œå…¨ä¸€æ ·ï¼Œåªæ˜¯æ¥å—å‚æ•°çš„æ–¹å¼ä¸å¤ªä¸€æ ·ã€‚

```js
function class1(args1,args2){       
  this.name=function(){      
   console.log(args,args);      
  }     
}     
function class2(){    
  var args1="1";
  var args2="2";
  class1.call(this,args1,args2);  
  /*æˆ–*/
  class1.apply(this,[args1,args2]);
}

var c=new class2();   
c.name();

è¾“å‡ºï¼š1 2
```

`call` éœ€è¦æŠŠå‚æ•°æŒ‰é¡ºåºä¼ é€’è¿›å»ï¼Œè€Œ `apply` åˆ™æ˜¯æŠŠå‚æ•°æ”¾åœ¨æ•°ç»„é‡Œã€‚

æ—¢ç„¶ä¸¤è€…åŠŸèƒ½ä¸€æ ·ï¼Œé‚£è¯¥ç”¨å“ªä¸ªå‘¢ï¼Ÿ

åœ¨JavaScript ä¸­ï¼ŒæŸä¸ªå‡½æ•°çš„å‚æ•°æ•°é‡æ˜¯ä¸å›ºå®šçš„ï¼Œå› æ­¤è¦è¯´é€‚ç”¨æ¡ä»¶çš„è¯ï¼Œå½“ä½ çš„å‚æ•°æ˜¯æ˜ç¡®çŸ¥é“æ•°é‡æ—¶ç”¨ call ï¼›è€Œä¸ç¡®å®šçš„æ—¶å€™ç”¨ applyï¼Œç„¶åæŠŠå‚æ•° push è¿›æ•°ç»„ä¼ é€’è¿›å»ã€‚å½“å‚æ•°æ•°é‡ä¸ç¡®å®šæ—¶ï¼Œå‡½æ•°å†…éƒ¨ä¹Ÿå¯ä»¥é€šè¿‡ arguments è¿™ä¸ªæ•°ç»„æ¥éå†æ‰€æœ‰çš„å‚æ•°ã€‚

## ç†è§£Function.prototype.bind()

`bind`æ˜¯åœ¨EcmaScript5ä¸­æ‰©å±•çš„æ–¹æ³•ï¼ˆIE6,7,8ä¸æ”¯æŒï¼‰
`bind()` æ–¹æ³•ä¸ apply å’Œ call å¾ˆç›¸ä¼¼ï¼Œä¹Ÿæ˜¯å¯ä»¥æ”¹å˜å‡½æ•°ä½“å†… `this` çš„æŒ‡å‘ã€‚

> MDNçš„è§£é‡Šæ˜¯ï¼š`bind()`æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ï¼Œç§°ä¸ºç»‘å®šå‡½æ•°ï¼Œå½“è°ƒç”¨è¿™ä¸ªç»‘å®šå‡½æ•°æ—¶ï¼Œç»‘å®šå‡½æ•°ä¼šä»¥åˆ›å»ºå®ƒæ—¶ä¼ å…¥ `bind()`æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸º `this`ï¼Œä¼ å…¥ `bind()` æ–¹æ³•çš„ç¬¬äºŒä¸ªä»¥åŠä»¥åçš„å‚æ•°åŠ ä¸Šç»‘å®šå‡½æ•°è¿è¡Œæ—¶æœ¬èº«çš„å‚æ•°æŒ‰ç…§é¡ºåºä½œä¸ºåŸå‡½æ•°çš„å‚æ•°æ¥è°ƒç”¨åŸå‡½æ•°ã€‚

æ³¨æ„ï¼š`bind`æ–¹æ³•çš„è¿”å›å€¼æ˜¯å‡½æ•°

```js
var bar=function(){  
  const x = 'é»˜è®¤å€¼'
  console.log(this.x);   
}
var foo={ 
     x:3   
}   
bar();  
bar.bind(foo)();

è¾“å‡ºï¼š
é»˜è®¤å€¼
3

var Animal=function(){  
  const name = 'animal'
  const age = 0
  const language = 'null'
  console.log(`i'm ${this.name},${this.age} year's old,i bark like this ${this.language}`)

}
var dog={ 
    name:'little puppy',
    age:3,
    language:'wang wang'
} 

Animal.bind(dog)()

// i'm little puppy,3 year's old,i bark like this wang wang


```


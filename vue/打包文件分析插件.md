webpack.prod.conf.js

```js
const baseWebpackConfig = require('./webpack.base.conf');

const BundleAnalyzerPlugin = require('webpack-bundle-analyzer')
    .BundleAnalyzerPlugin;
const BundleAnalyzer = new BundleAnalyzerPlugin({
    analyzerMode: 'server',
    analyzerHost: '127.0.0.1',
    analyzerPort: 9527, // 运行后的端口号
    reportFilename: 'report.html',
    defaultSizes: 'parsed',
    openAnalyzer: true,
    generateStatsFile: false,
    statsFilename: 'stats.json',
    statsOptions: null,
    logLevel: 'info',
});
if (config.build.bundleAnalyzerReport) {
    baseWebpackConfig.plugins.push(BundleAnalyzer);
}
```

packjson.json

```json
"preview": "cross-env NODE_ENV=production npm_config_report=true npm run build"
```

config.js

```js
bundleAnalyzerReport: process.env.npm_config_report,
```


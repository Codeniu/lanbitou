## 1点击获取组织id



## 2取出该组织下的所有人员

```html
//api
api = http://localhost:8000/coral-base/api/coral/base/tbsMainInfoController/search?pageNum=0&pageSize=0

//参数
{
"corpId":"0104"
}

{
"copyId":"0399"
}
```

## 3添加到组织树中

```json
advantages: "未知"
birthPlace: "河南"
birthTime: "2019-06-04"
cadreRank: "未知"
checker: null
corpId: "0199"
corpName: null
createdTime: "2019-09-04T11:24:19.000+0000"
createdUser: "未知"
dateExt04: "2019-09-04"
dateExt05: "2019-09-04"
fileNum: "0"
fileVolume: 0
fullEducation: "未知"
gatherer: null
gender: "男"
id: 10
idCardNum: "410945199509019911"
isRemove: "0"
jobEducation: "未知"
languageType: "俄语"
lastWrittenTime: "2019-09-23T03:14:49.000+0000"
modifiedTime: "2019-09-04T11:24:24.000+0000"
modifiedUser: "未知"
name: "老苏"
nation: "汉"
nativePlace: "河南"
orgCode: null
partyTime: "2019-09-03"
photo: "/photo/1.jpg"
politicIdentity: "未知"
positionTime: "2019-09-04"
positions: "未知"
rankTime: "2019-09-04"
reChecker: null
remark: null
staffRank: "未知"
strExt02: "未知"
strExt03: "未知"
titles: "未知"
workTime: "2019-09-04"
```



```js
    //
    initTree() {
      console.log(this.data[0].children); // 33个组织
      const orgList = this.data[0].children;

      for (let i = 0; i < orgList.length; i++) {
        const element = orgList[i];

        if (element.children == null) {
          // 当前节点下因该是人
          element.children = this.getPeopleListById(element.id)
        } else {
          const orgList2 = element.children;
        }
      }
    },



    //
    getPeopleListById(corpId) {
      var peoList = this.getPeopleList();
      console.log(peoList);
      const data = [];
      for (let i = 0; i < peoList.length; i++) {
        const element = peoList[i];

        if(corpId == element.corpId){
          data.push(element)
        }
        
      }
      return data
    },
        
        
        
            //
    getPeopleList() {
      var data1 = [];
      var api =
        "/coral-base/api/coral/base/tbsMainInfoController/search?pageNum=0&pageSize=0";
      var params = {};
      this.axios.post(api, params, {}).then(res => {
        if (res.data.success) {
          // console.log(res.data.data.size);
          // console.log(res.data.data.list);
          data1 =  res.data.data.list;
        }
      });

      return data1;
    },


```





```html
:data="data"
:default-expanded-keys="['2099']"

handleNodeClick(data) {
    var api =
    "/coral-base/api/coral/base/tbsMainInfoController/search?pageNum=0&pageSize=0";
    var params = {
    corpId: data.id
    };
    this.axios.post(api, params, {}).then(res => {
    if (res.data.success) {
    console.log(res.data.data.size);
    //该节点下是否有单位
    if (res.data.data.size != 0) {
    var list = res.data.data.list;
    console.log(list);
    data.children = this.listFormate(list);
    }
    }
    });
}
```

